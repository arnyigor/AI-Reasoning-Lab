# main.py
import pandas as pd
from CoreGenerator import CorePuzzleGenerator
from EinsteinPuzzle import EinsteinPuzzleDefinition

if __name__ == '__main__':
    # Глобальные настройки для красивого вывода больших таблиц
    pd.set_option('display.max_rows', 500)
    pd.set_option('display.max_columns', 500)
    pd.set_option('display.width', 1000)

    # Общие данные для всех "Загадок Эйнштейна"
    EINSTEIN_THEMES = {
        # --- ТЕХНОЛОГИИ И БУДУЩЕЕ ---

        "Киберпанк-Нуар в Неон-Сити": {
            "Персонаж": ["Рейвен", "Кай", "Джейд", "Слай", "Зеро", "Тринити", "Морфиус", "Деккард", "Корбен", "Никс"],
            "Корпорация": ["ОмниКорп", "БиоТех", "КиберДайн", "Арасака", "Тайрелл", "Синтетикс", "Нексус", "Датаком", "Виртуал", "Геномикс"],
            "Имплант": ["Кибер-глаз 'Око'", "Нейро-чип 'Синапс'", "Рука 'Титан'", "Сердце 'Реактор'", "Ноги 'Рывок'", "Кожный камуфляж", "Фильтр токсинов", "Усилитель рефлексов", "Голосовой модулятор", "Мнемо-драйв"],
            "Район": ["Сектор-7G", "Нео-Киото", "Трущобы Айронсайда", "Финансовый Шпиль", "Порт Элизиум", "Заводской Улей", "Кремниевая Аллея", "Аркология 'Эдем'", "Рынок 'Вавилон'", "Кладбище Дронов"],
            "Контрабанда": ["Запретный ИИ", "Военные данные", "Нейро-вирус 'Коллапс'", "Синтетическая кровь", "Чистый нейроморфин", "Карта 'Призрачной Сети'", "Генератор помех", "Крио-капсула", "Нелегальное оружие", "Коды доступа 'Цербер'"],
            "Напиток": ["Синтетический Виски", "Азотный Коктейль", "Энергетик 'Спарк'", "Протеиновый Шейк", "Фильтрованная Вода", "Неоновый Абсент", "Хром-Кофе", "Нутриент-Гель", "Электро-Чай", "Био-Сок"],
            "Гаджет": ["ЭМИ-граната", "Дрон-разведчик 'Оса'", "Плазменный резак", "Голо-проектор", "Силовой кастет", "Маскировочное поле", "Анализатор ДНК", "Взломщик 'Скелет'", "Магнитные ботинки", "Инъектор стимуляторов"],
            "Уровень доступа": ["Уровень 1 (Гость)", "Уровень 2 (Сотрудник)", "Уровень 3 (Инженер)", "Уровень 4 (Охрана)", "Уровень 5 (Менеджер)", "Уровень 6 (Админ)", "Уровень 7 (Директор)", "Уровень 8 (Омега)"],
        },

        "Космическая Одиссея 'Андромеда'": {
            "Капитан": ["Рейнольдс", "Шепард", "Адама", "Старбак", "Пикар", "Соло", "Акбар", "Джейнвэй", "Кирк", "Холден"],
            "Корабль": ["'Серенити'", "'Нормандия'", "'Галактика'", "'Энтерпрайз'", "'Сокол'", "'Прометей'", "'Орион'", "'Вояджер'", "'Дискавери'", "'Росинант'"],
            "Сектор": ["Туманность Ориона", "Скопление Плеяд", "Галактика Андромеды", "Магелланово Облако", "Сектор Гидры", "Пустота Эридана", "Квазар 3C 273", "Туманность Улитка", "Столпы Творения", "Кошачий Глаз"],
            "Аномалия": ["Червоточина", "Грави-колодец", "Темпоральный сдвиг", "Нейтронная буря", "Пси-поле", "Ксено-артефакт", "Сингулярность", "Подпространственный разрыв", "Темная материя", "Призрачный сигнал"],
            "Груз": ["Ксено-минералы", "Медикаменты", "Колонисты", "Оружие", "Редкие газы", "Терраформер", "Дипломатический пакет", "Древние реликвии", "Энергоячейки", "Замороженные эмбрионы"],
            "Планета": ["Арракис", "Пандора", "Корусант", "Солярис", "Магратея", "Клендату", "Эдем-Прайм", "Трантор", "Камино", "Илос"],
            "Раса": ["Люди", "Клингоны", "Вулканцы", "Азари", "Турианцы", "Ворлонцы", "Протеане", "Конструкторы", "Йодаи", "Скруллы"],
            "Цель миссии": ["Исследование", "Дипломатия", "Военная операция", "Колонизация", "Поиск ресурсов", "Спасательная операция", "Торговля", "Научный эксперимент", "Побег", "Паломничество"],
        },

        # --- ТАЙНЫ И РАССЛЕДОВАНИЯ ---

        "Тайна в Школе на Холме": {
            "Ученик": ["Виктория", "Даниил", "Никита", "Алексей", "София", "Матвей", "Анна", "Игорь", "Ольга", "Павел"],
            "Предмет": ["Алгебра", "Биология", "География", "История", "Музыка", "ИЗО", "Химия", "Физика", "Литература", "Информатика"],
            "Кружок": ["Шахматы", "Дебаты", "Театральный", "Фотография", "Астрономия", "Робототехника", "Журналистика", "Волонтерство", "Оркестр", "Спортклуб"],
            "Обед": ["Пицца", "Суп", "Салат", "Сэндвич", "Котлета", "Запеканка", "Плов", "Макароны", "Бургер", "Роллы"],
            "Хобби": ["Чтение", "Видеоигры", "Рисование", "Спорт", "Музыка", "Программирование", "Коллекционирование", "Танцы", "Готовка", "Путешествия"],
            "Любимый фильм": ["Драма", "Комедия", "Боевик", "Фантастика", "Триллер", "Детектив", "Мультфильм", "Документальный", "Хоррор", "Фэнтези"],
            "Место в библиотеке": ["У окна", "В углу", "За круглым столом", "На 2-м этаже", "В архиве", "У стеллажа 'А'", "Возле входа", "В читальном зале", "На пуфике", "За компьютером"],
            "Домашнее животное": ["Кошка", "Собака", "Попугай", "Хомяк", "Рыбки", "Черепаха", "Кролик", "Морская свинка", "Игуана", "Паук"],
            "Цвет рюкзака": ["Красный", "Синий", "Зеленый", "Черный", "Желтый", "Фиолетовый", "Оранжевый", "Серый", "Белый", "Розовый"],
            "Класс": ["7А", "8Б", "9В", "10Г", "11А", "12Д", "13Е", "14Н", "15К", "16Л"],
            "Мечта": ["Стать врачом", "Полететь в космос", "Написать книгу", "Создать игру", "Выиграть олимпиаду", "Стать актером", "Открыть бизнес", "Спасти мир", "Изобрести что-то", "Объехать мир"]
        },

        "Офисная Тайна 'Дедлайн'": {
            "Сотрудник": ["Иванов", "Петров", "Смирнов", "Кузнецов", "Волков", "Соколов", "Лебедев", "Козлов", "Новиков", "Морозов"],
            "Отдел": ["Финансы", "Маркетинг", "IT-разработка", "HR", "Продажи", "Логистика", "Аналитика", "PR-служба", "Техподдержка", "Дизайн"],
            "Проект": ["'Альфа'", "'Омега'", "'Квант'", "'Зенит'", "'Титан'", "'Орион'", "'Спектр'", "'Горизонт'", "'Прорыв'", "'Атлант'"],
            "Напиток": ["Эспрессо", "Американо", "Латте", "Капучино", "Зеленый чай", "Черный чай", "Матча", "Вода с лимоном", "Комбуча", "Какао"],
            "Рабочее место": ["У окна", "В углу офиса", "Возле принтера", "На 3-м этаже", "В переговорной", "У доски", "За стойкой", "В опен-спейсе", "На диване", "В кабинете"],
            "Задача": ["Написать отчет", "Провести митинг", "Отладить код", "Сделать презентацию", "Обзвонить клиентов", "Составить план", "Провести собеседование", "Нарисовать макет", "Развернуть сервер", "Заключить сделку"],
            "Опоздание": ["На 5 минут", "На 15 минут", "На 30 минут", "На час", "Не опоздал", "На 2 минуты", "На 10 минут", "На 20 минут", "На 45 минут", "На 2 часа"],
            "Хобби после работы": ["Спортзал", "Бар с коллегами", "Чтение книги", "Просмотр сериала", "Курсы повышения", "Настольные игры", "Прогулка в парке", "Встреча с друзьями", "Йога", "Домашние дела"],
        },

        # --- ФЭНТЕЗИ И ПРИКЛЮЧЕНИЯ ---

        "Гильдия Авантюристов": {
            "Герой": ["Торгрим", "Элара", "Ричард", "Селена", "Гром", "Лиара", "Флинн", "Бриенна", "Кайден", "Изольда"],
            "Класс": ["Воин", "Маг", "Лучник", "Разбойник", "Жрец", "Варвар", "Паладин", "Друид", "Бард", "Некромант"],
            "Оружие": ["Двуручный меч", "Магический посох", "Длинный лук", "Парные кинжалы", "Священный молот", "Боевой топор", "Сияющий клинок", "Посох из лозы", "Зачарованная лютня", "Череп-артефакт"],
            "Квест": ["Убить дракона", "Спасти принцессу", "Найти древний артефакт", "Защитить деревню", "Исследовать руины", "Очистить подземелье", "Сопроводить караван", "Собрать редкие травы", "Раскрыть заговор", "Победить на турнире"],
            "Ранг в гильдии": ["Бронза", "Серебро", "Золото", "Платина", "Мифрил", "Адамантит", "Эфириум", "Легенда"],
            "Питомeц": ["Волк", "Сокол", "Грифон", "Дрейк", "Элементаль", "Виверна", "Боевой кабан", "Призрак", "Голем", "Фея"],
            "Напиток в таверне": ["Эль", "Медовуха", "Вино", "Громили-грог", "Вода", "Молоко", "Травяной отвар", "Сок", "Гоблинский самогон", "Драконья настойка"],
            "Место в мире": ["Замок короля", "Эльфийский лес", "Гномьи пещеры", "Драконьи горы", "Болота нежити", "Столица Империи", "Портовый город", "Волшебная академия", "Руины древних", "Пустыня Хаоса"],
        }
    }
    EINSTEIN_STORY_ELEMENTS = {
        "scenario": "",
        "position": "локация"
    }

    # ===============================================================
    # --- НАСТРОЙКИ ГЕНЕРАЦИИ ---
    # ===============================================================

    # --- ГЕНЕРАЦИЯ ЗАДАЧИ №1 (КЛАССИЧЕСКАЯ) ---
    print("\n\n--- ГЕНЕРАЦИЯ ЗАДАЧИ ---")

    # 1. Задаем желаемые параметры
    desired_theme_name_1 = "Офисная Тайна 'Дедлайн'"
    desired_num_items_1 = 5
    desired_num_categories_1 = 5

    # 2. Проверяем, что наши желания выполнимы
    target_theme_1 = EINSTEIN_THEMES[desired_theme_name_1]
    max_possible_items_1 = min(len(v) for v in target_theme_1.values())
    max_possible_categories_1 = len(target_theme_1)

    if desired_num_items_1 > max_possible_items_1:
        raise ValueError(f"Ошибка в Задаче №1: Невозможно создать {desired_num_items_1} строк, в темах максимум {max_possible_items_1} элементов.")
    if desired_num_categories_1 > max_possible_categories_1:
        raise ValueError(f"Ошибка в Задаче №1: Невозможно создать {desired_num_categories_1} категорий, в теме '{desired_theme_name_1}' максимум {max_possible_categories_1}.")

    # 3. Создаем и запускаем генератор
    einstein_def_1 = EinsteinPuzzleDefinition(themes={desired_theme_name_1: target_theme_1},
                                              story_elements=EINSTEIN_STORY_ELEMENTS,
                                              num_items=desired_num_items_1,
                                              num_categories=desired_num_categories_1)
    core_gen_1 = CorePuzzleGenerator(puzzle_definition=einstein_def_1)
    core_gen_1.generate()
