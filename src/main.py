# main.py
import pandas as pd
from CoreGenerator import CorePuzzleGenerator
from EinsteinPuzzle import EinsteinPuzzleDefinition

if __name__ == '__main__':
    # Глобальные настройки для красивого вывода больших таблиц
    pd.set_option('display.max_rows', 500)
    pd.set_option('display.max_columns', 500)
    pd.set_option('display.width', 1000)

    # Общие данные для всех "Загадок Эйнштейна"
    EINSTEIN_THEMES = {
        "Тайна в Школе на Холме": {
            "Ученик": ["Виктория", "Даниил", "Никита", "Алексей", "София", "Матвей", "Анна", "Игорь", "Ольга", "Павел"],
            "Предмет": ["Алгебра", "Биология", "География", "История", "Музыка", "ИЗО", "Химия", "Физика", "Литература", "Информатика"],
            "Кружок": ["Шахматы", "Дебаты", "Театральный", "Фотография", "Астрономия", "Робототехника", "Журналистика", "Волонтерство", "Оркестр", "Спортклуб"],
            "Обед": ["Пицца", "Суп", "Салат", "Сэндвич", "Котлета", "Запеканка", "Плов", "Макароны", "Бургер", "Роллы"],
            "Хобби": ["Чтение", "Видеоигры", "Рисование", "Спорт", "Музыка", "Программирование", "Коллекционирование", "Танцы", "Готовка", "Путешествия"],
            "Любимый фильм": ["Драма", "Комедия", "Боевик", "Фантастика", "Триллер", "Детектив", "Мультфильм", "Документальный", "Хоррор", "Фэнтези"],
            "Место в библиотеке": ["У окна", "В углу", "За круглым столом", "На 2-м этаже", "В архиве", "У стеллажа 'А'", "Возле входа", "В читальном зале", "На пуфике", "За компьютером"],
            "Домашнее животное": ["Кошка", "Собака", "Попугай", "Хомяк", "Рыбки", "Черепаха", "Кролик", "Морская свинка", "Игуана", "Паук"],
            "Цвет рюкзака": ["Красный", "Синий", "Зеленый", "Черный", "Желтый", "Фиолетовый", "Оранжевый", "Серый", "Белый", "Розовый"],
            "Мечта": ["Стать врачом", "Полететь в космос", "Написать книгу", "Создать игру", "Выиграть олимпиаду", "Стать актером", "Открыть бизнес", "Спасти мир", "Изобрести что-то", "Объехать мир"]
        },
        "Офисная Тайна": {
            "Сотрудник": ["Иванов", "Петров", "Смирнов", "Кузнецов", "Волков", "Соколов", "Лебедев"],
            "Отдел": ["Финансы", "Маркетинг", "IT", "HR", "Продажи", "Логистика", "Аналитика"],
            "Проект": ["Альфа", "Омега", "Квант", "Зенит", "Титан", "Орион", "Спектр"],
            "Напиток": ["Кофе", "Зеленый чай", "Черный чай", "Вода", "Латте", "Капучино", "Эспрессо"]
        },
        "Космическая Одиссея": {
            "Капитан": ["Рейнольдс", "Шепард", "Адама", "Старбак", "Пикар", "Соло", "Акбар"],
            "Корабль": ["Серенити", "Нормандия", "Галактика", "Звёздный Крейсер", "Энтерпрайз", "Сокол", "Прометей"],
            "Сектор": ["Орион", "Андромеда", "Плеяды", "Центавра", "Гидра", "Войд", "Квазар"],
            "Аномалия": ["Червоточина", "Грави-колодец", "Темпоральный сдвиг", "Нейтронная буря", "Пси-поле", "Ксено-артефакт", "Сингулярность"]
        }
    }
    EINSTEIN_STORY_ELEMENTS = {
        "scenario": "",
        "position": "локация"
    }

    # ===============================================================
    # --- НАСТРОЙКИ ГЕНЕРАЦИИ ---
    # ===============================================================

    # --- ГЕНЕРАЦИЯ ЗАДАЧИ №1 (КЛАССИЧЕСКАЯ) ---
    print("\n\n--- ГЕНЕРАЦИЯ КЛАССИЧЕСКОЙ ЗАДАЧИ 5x4 ---")

    # 1. Задаем желаемые параметры
    desired_theme_name_1 = "Тайна в Школе на Холме"
    desired_num_items_1 = 5
    desired_num_categories_1 = 5
    is_circular_1 = False

    # 2. Проверяем, что наши желания выполнимы
    target_theme_1 = EINSTEIN_THEMES[desired_theme_name_1]
    max_possible_items_1 = min(len(v) for v in target_theme_1.values())
    max_possible_categories_1 = len(target_theme_1)

    if desired_num_items_1 > max_possible_items_1:
        raise ValueError(f"Ошибка в Задаче №1: Невозможно создать {desired_num_items_1} строк, в темах максимум {max_possible_items_1} элементов.")
    if desired_num_categories_1 > max_possible_categories_1:
        raise ValueError(f"Ошибка в Задаче №1: Невозможно создать {desired_num_categories_1} категорий, в теме '{desired_theme_name_1}' максимум {max_possible_categories_1}.")

    # 3. Создаем и запускаем генератор
    einstein_def_1 = EinsteinPuzzleDefinition(themes={desired_theme_name_1: target_theme_1},
                                              story_elements=EINSTEIN_STORY_ELEMENTS,
                                              num_items=desired_num_items_1,
                                              num_categories=desired_num_categories_1,
                                              is_circular=is_circular_1)
    core_gen_1 = CorePuzzleGenerator(puzzle_definition=einstein_def_1)
    core_gen_1.generate()
